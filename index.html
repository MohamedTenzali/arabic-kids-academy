<!DOCTYPE html>
<html lang="nl">

<head>
  <meta charset="UTF-8" />
  <title>Arabic Kids Academy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- ============ PWA / ICONS ============ -->
  <link rel="manifest" href="manifest.webmanifest" />
  <meta name="theme-color" content="#4f46e5" />
  <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png" />
  <link rel="icon" type="image/png" sizes="512x512" href="icons/icon-512.png" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />

  <!-- CSS -->
  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <!-- ============ HOME VIEW (NIVEAU-KIEZER) ============ -->
  <div id="homeView" class="view home-view">
    <div class="home-header">
      <h1>Arabic Kids Academy</h1>
      <p>Leer Arabische letters, klanken, woorden en zinnen â€“ stap voor stap!</p>
      <!-- Versie-label van de app: handmatig bijwerken bij nieuwe release -->
      <small class="app-version">Versie: v1.3.0</small>

    </div>

    <div class="home-levels">
      <button class="level-card level-beginner" data-level="beginner">
        <div class="level-icon">â˜…</div>
        <h2>Beginner</h2>
        <p>Start bij 0: letters leren</p>
      </button>

      <button class="level-card level-advanced" data-level="advanced">
        <div class="level-icon">ğŸ“–</div>
        <h2>Gevorderd</h2>
        <p>Begin bij klanken &amp; lezen</p>
      </button>

      <button class="level-card level-expert" data-level="expert">
        <div class="level-icon">ğŸ†</div>
        <h2>De Beste</h2>
        <p>Direct naar woorden &amp; zinnen</p>
      </button>
    </div>
  </div>

  <!-- ============ MAP VIEW (SPEELBORD MET SLOTJES) ============ -->
  <div id="mapView" class="view map-view hidden">
    <button id="btnBackHome" class="back-home">âŒ‚ Terug naar start</button>
    <h2 id="mapTitle" class="map-title"></h2>

    <div class="map-wrapper">
      <div class="map-line"></div>
      <div id="mapSteps" class="map-steps"></div>
    </div>
  </div>

  <!-- ============ ACTIVITY VIEW (LES + QUIZ + RESULTAAT) ============ -->
  <div id="activityView" class="view activity-view hidden">
    <!-- Bovenbalk met titel + voortgang -->
    <div class="activity-header">
      <button id="btnActivityBack" class="activity-back">Stop</button>
      <div id="activityTitle" class="activity-title"></div>
      <div id="activityProgress" class="activity-progress"></div>
    </div>

    <!-- LES-MODUS (letters, klanken, woorden, zinnen) -->
    <div id="lessonContent" class="activity-body hidden">
      <div class="lesson-card">
        <div id="lessonArabic" class="lesson-arabic"></div>

        <!-- TTS-knop: gebruikt lokale mp3-bestanden via app.js -->
        <button id="btnSpeak" class="tts-button">ğŸ”Š Afspelen</button>

        <div id="lessonName" class="lesson-name"></div>
        <div id="lessonDesc" class="lesson-desc"></div>

        <!-- Navigatie binnen de les -->
        <div class="lesson-nav">
          <button id="btnLessonPrev" class="primary-button secondary">Vorige</button>
          <button id="btnLessonNext" class="primary-button">Volgende</button>
        </div>
      </div>
    </div>

    <!-- QUIZ-MODUS (letters / klanken / eind-examen) -->
    <div id="quizContent" class="activity-body hidden">
      <h2 id="quizQuestion" class="quiz-question"></h2>
      <div id="quizOptions" class="quiz-options"></div>
      <div id="quizFeedback" class="quiz-feedback"></div>
    </div>

    <!-- RESULTAAT-OVERLAY (na les of quiz) -->
    <div id="resultContent" class="result-view hidden">
      <div class="result-card">
        <div id="resultEmoji" class="result-emoji"></div>
        <h2 id="resultTitle" class="result-title"></h2>
        <p id="resultText" class="result-text"></p>
        <p id="resultScore" class="result-score"></p>
        <button id="btnResultPrimary" class="primary-button"></button>
      </div>
    </div>
  </div>

  <!-- ============ SCRIPTS ============ -->
  <script src="app.js"></script>
  <script>
    // Service worker registratie voor PWA / offline
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("service-worker.js").catch(err => {
          console.error("Service worker registratie fout:", err);
        });
      });
    }
  </script>
    <!-- UPDATE-BANNER (verborgen tot er een update is) -->
  <div id="updateBanner" class="update-banner hidden">
    <span>Nieuwe versie beschikbaar.</span>
    <button id="btnUpdateNow" class="update-button">Update</button>
  </div>

  <!-- SCRIPTS -->
  <script src="app.js"></script>
  <script>
    // Service worker registratie + update-logica
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", async () => {
        try {
          const registration = await navigator.serviceWorker.register("service-worker.js");

          let newWorker = null;

          // Als er een nieuwe service worker wordt gevonden
          registration.addEventListener("updatefound", () => {
            newWorker = registration.installing;
            newWorker.addEventListener("statechange", () => {
              // 'installed' + al een controller = er is een nieuwe versie beschikbaar
              if (newWorker.state === "installed" && navigator.serviceWorker.controller) {
                const banner = document.getElementById("updateBanner");
                if (banner) banner.classList.remove("hidden");
              }
            });
          });

          // Als de nieuwe SW actief wordt, pagina herladen
          navigator.serviceWorker.addEventListener("controllerchange", () => {
            window.location.reload();
          });

          const btnUpdateNow = document.getElementById("btnUpdateNow");
          if (btnUpdateNow) {
            btnUpdateNow.addEventListener("click", () => {
              // Vraag de nieuwe SW om meteen actief te worden
              if (registration.waiting) {
                registration.waiting.postMessage({ type: "SKIP_WAITING" });
              } else if (newWorker) {
                newWorker.postMessage({ type: "SKIP_WAITING" });
              }
            });
          }
        } catch (err) {
          console.error("Service worker registratie fout:", err);
        }
      });
    }
  </script>

</body>
</html>


</body>
</html>
